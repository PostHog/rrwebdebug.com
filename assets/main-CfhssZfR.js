import{p as f}from"./populate-versions-DTmoGfh6.js";function l(){document.querySelectorAll(".input-section").forEach(n=>{n.classList.add("d-none")});const t=document.querySelector('input[name="inputMethod"]:checked');if(t){const n=t.value,e=document.getElementById(n+"Input");e&&e.classList.remove("d-none")}}function p(){return new Promise((t,n)=>{const e=indexedDB.open("rrweb-storage",1);e.onerror=()=>n(e.error),e.onsuccess=()=>t(e.result),e.onupgradeneeded=()=>{const o=e.result;o.objectStoreNames.contains("events")||o.createObjectStore("events")}})}function v(t){return new Promise(async(n,e)=>{try{const a=(await p()).transaction(["events"],"readwrite");a.objectStore("events").put(t,"rrweb-events"),a.oncomplete=()=>n(),a.onerror=()=>e(a.error)}catch(o){e(o)}})}async function h(t){console.log("handleFormSubmission"),t.preventDefault();const n=t.target,e=new FormData(n),o=e.get("inputMethod"),a=e.get("version"),d=e.has("canvas"),u=e.has("virtual-dom"),m=e.has("play"),s=new URLSearchParams;if(s.set("version",a),d&&s.set("canvas","true"),u&&s.set("virtual-dom","true"),m&&s.set("play","true"),o==="url"){const c=e.get("url");if(!c){alert("Please enter a URL");return}s.set("url",c)}else{let c;if(o==="file"){const r=e.get("file");if(!r||r.size===0){alert("Please select a file");return}try{const i=await r.text();c=JSON.parse(i)}catch(i){alert("Invalid JSON file: "+i.message);return}}else if(o==="paste"){const r=e.get("jsonContent");if(!r.trim()){alert("Please paste JSON content");return}try{c=JSON.parse(r)}catch(i){alert("Invalid JSON content: "+i.message);return}}try{await v(c),console.log("Events stored in IndexedDB")}catch(r){throw console.warn("IndexedDB failed, trying sessionStorage:",r),r}s.set("source","local")}window.location.href="play/index.html?"+s.toString()}function g(){document.querySelectorAll('input[name="inputMethod"]').forEach(n=>{n.addEventListener("change",l)});const t=document.getElementById("eventsForm");t&&t.addEventListener("submit",h)}function w(){f(),g(),setTimeout(l,0),console.log("Welcome to rrwebdebug.com!")}window.addEventListener("pageshow",function(){setTimeout(l,0)});document.addEventListener("DOMContentLoaded",w);
